services:
  tcp-agent:
    build: .
    container_name: tcp-agent
    restart: unless-stopped
    network_mode: host
    command:
      - agent
      - --relay-host
      - ${PROXY_RELAY_HOST}
      - --control-port
      - "7000"
      - --data-port
      - "7001"
      - --target
      - ${PROXY_TARGET:-127.0.0.1:22}
      - --token
      - ${PROXY_TOKEN}
    environment:
      PROXY_RELAY_HOST: ${PROXY_RELAY_HOST}
      PROXY_TOKEN: ${PROXY_TOKEN}
      PROXY_TARGET: ${PROXY_TARGET:-127.0.0.1:22}
